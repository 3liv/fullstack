var rijs=function(n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var e="undefined"!=typeof window,t=function(){var n,e,t=new Promise(function(t,r){n=t,e=r});return arguments.length&&n(arguments[0]),t.resolve=n,t.reject=e,t};var r=function n(e,t){return t instanceof Array&&(t=t.reduce(n,[])),(e=e||[]).concat(t)},o=function(n,e,t,r){return n.host&&n.host.nodeName&&(n=n.host),e.name&&(t=e,e=e.name),!function(n,e){return e in n}(n,e)&&Object.defineProperty(n,e,{value:t,writable:r}),n[e]},u=function(){},i=function n(e,i){return i=i||{},o(e=e||{},"emit",function(n,t,o){for(var u=e.on[n.split(".")[0]]||[],i=[],a=0;a<u.length;a++)u[a].ns&&o&&!o(u[a].ns)||i.push(c(u[a].isOnce?u.splice(a--,1)[0]:u[a],t));for(var a=0;a<e.on["*"].length;a++)i.push(c(e.on["*"][a],[n,t]));return i.reduce(r,[])},1),o(e,"once",function(n,t){return e.on(n,t,!0)},1),o(e,"off",function(n,t){a(e.on[n]||[],t),t&&t.ns&&delete e.on[n]["$"+t.ns];return e},1),o(e,"on",function(n,t,r){var o=n.split(".")[0],c=n.split(".")[1],f=e.on[o]=e.on[o]||[],d="function"==typeof t?t:0;return!d&&c?(d=e.on[o]["$"+c])?d:l(s(e,t)):d||c?d&&c?l((a(f,e.on[o]["$"+c]||-1),d)):!(!d||c)&&l(d):l(s(e,t));function l(n){return n.isOnce=r,n.type=o,c&&(e.on[o]["$"+(n.ns=c)]=n),f.push(n),(i.on||u)(n),n.next?n:e}},1),e.on["*"]=e.on["*"]||[],e;function c(n,t){return n.next?n.next(t):t instanceof Array?n.apply(e,t):n.call(e,t)}function a(n,e){for(var t=n.length;~--t;)e!=n[t]&&e!=n[t].fn&&e||(i.off||u)(n.splice(t,1)[0])}function s(e,r){var o=n((r=r||{}).base||t());return o.i=0,o.li=[],o.fn=r.fn,o.parent=e,o.source=r.fn?o.parent.source:o,o.on("stop",function(n){return o.type?o.parent.off(o.type,o):o.parent.off(o),o.reason=n}),o.each=function(n){var e=n.next?n:s(o,{fn:n});return o.li.push(e),e},o.pipe=function(n){return n(o)},o.map=function(n){return o.each(function(e,t,r){return r.next(n(e,t,r))})},o.filter=function(n){return o.each(function(e,t,r){return n(e,t,r)&&r.next(e)})},o.reduce=function(n,e){return o.each(function(t,r,o){return o.next(e=n(e,t,r,o))})},o.unpromise=function(){var n=s(o,{base:{},fn:function(e){return n.next(e)}});return o.li.push(n),n},o.next=function(n){return o.resolve&&o.resolve(n),o.li.length?o.li.map(function(e){return e.fn(n,e.i++,e)}):n},o.until=function(n){return n?n.each?n.each(o.stop):n.then?n.then(o.stop):n.call?o.filter(n).map(o.stop):0:0},o.off=function(n){return a(o.li,n),o},o.start=function(n){return o.until(n),o.source.emit("start"),o},o.stop=function(n){return o.source.emit("stop",n)},o[Symbol.asyncIterator]=function(){return{next:function(){return o.wait=new Promise(function(n){o.wait=!0,o.map(function(e,t,r){delete o.wait,o.off(r),n({value:e,done:!1})}),o.emit("pull",o)})}}},o}},c=a;function a(n){return function(e){return e==n}}a.fn=function(n){return"function"==typeof n},a.str=function(n){return"string"==typeof n},a.num=function(n){return"number"==typeof n},a.obj=function(n){return"object"==typeof n},a.lit=function(n){return n.constructor==Object},a.bol=function(n){return"boolean"==typeof n},a.truthy=function(n){return 1==!!n},a.falsy=function(n){return 0==!!n},a.arr=function(n){return n instanceof Array},a.null=function(n){return null===n},a.def=function(n){return void 0!==n},a.in=function(n){return function(e){return!!n&&(n.indexOf?~n.indexOf(e):e in n)}},a.promise=function(n){return n instanceof Promise},a.stream=function(n){return!(!n||!n.next)};["red","green","bold","grey","strip"].forEach(function(n){!c.str(String.prototype[n])&&Object.defineProperty(String.prototype,n,{get:function(){return String(this)}})});var s=function(n){return n},f=function(n){return function(){return n}},d=function(n){return Object.keys(c.obj(n)||c.fn(n)?n:{})},l=function(n){return 0===n?"0":n?c.fn(n)?""+n:c.obj(n)?JSON.stringify(n):String(n):""},p=function n(e,t){var r=arguments.length>1,o=c.fn(e)?[]:l(e).split(".").filter(Boolean),u=o.shift();return function(i,a){var s={};return i?c.num(e)||e?c.arr(e)?(e.map(function(e){var r=n(e)(i);null!=(r=c.fn(t)?t(r):null==r?t:r)&&n(e,c.fn(r)?f(r):r)(s)}),s):i[e]||!o.length?r?(i[e]=c.fn(t)?t(i[e],a):t,i):c.fn(e)?e(i):i[e]:r?(n(o.join("."),t)(i[u]?i[u]:i[u]={}),i):n(o.join("."))(i[u]):r?function(n,e){return d(n).map(function(e){delete n[e]}),d(e).map(function(t){n[t]=e[t]}),n}(i,t):i:void 0}},m=function(n,e){var t=1==arguments.length;return function(r){return r&&r.headers?t?p(n)(r.headers):p(n)(r.headers)==e:null}},h=function(n){return n.__data__},v=y;function y(n){return function(e){return p(e)(n)}}y.parent=function(n){return h(this.parentNode)[n]};var b=function(n){return n?d(n).map(v(n)):[]},g={arr:function(n){return Array.prototype.slice.call(n,0)},obj:function(n){var e="id";return 1==arguments.length?(e=n,t):t.apply(this,arguments);function t(n,t,r){return 0===r&&(n={}),n[c.fn(e)?e(t,r):t[e]]=t,n}}};var w=function(){return function n(e){return function(t,r){if(!e.length)return 0;var o=e[0],u=p(o)(t)||"",i=p(o)(r)||"";return u<i?1:u>i?-1:n(e.slice(1))(t,r)}}(g.arr(arguments))};var j,O=function(n){return function(e){return e&&e.indexOf&&~e.indexOf(n)}},S={header:"text/plain",check:function(n){return!O(".html")(n.name)&&!O(".css")(n.name)&&c.str(n.body)}},k=e?window:global,N=function(n){return function(e){if(!k.console||!console.log.apply)return e;c.arr(arguments[2])&&(arguments[2]=arguments[2].length);var t=g.arr(arguments),r="[log]["+(new Date).toISOString()+"]"+n;return t.unshift(r.grey?r.grey:r),console.log.apply(console,t),e}},$=B((e?(k.location.search.match(/debug=(.*?)(&|$)/)||[])[1]:p("process.env.DEBUG")(k))||""),A=$.split(",").map((j="/",function(n){return n.split(j)}));function B(n){return n.replace(/(\[|\])/g,"")}var E,P=function(n){void 0===n&&(n={});var e=n.aliases;return void 0===e&&(e={}),T("creating"),t.resources={},t.link=q(t),t.register=t,t.types=L(),U(i(t),e);function t(n,e,r){return n?c.arr(n)?n.map(t):c.promise(n)?n.then(t).catch(R):c.obj(n)&&!n.name?t(b(n)):c.fn(n)&&n.resources?t(b(n.resources)):c.str(n)&&!e&&t.resources[n]?t.resources[n].body:!c.str(n)||e||t.resources[n]?c.str(n)&&e?C(t)({name:n,body:e,headers:r}):c.obj(n)?C(t)(n):(R("could not find or create resource",n),!1):void 0:t}},C=function(n){return function(e){var t=e.name,r=e.body,o=e.headers;if(void 0===o&&(o={}),t=n.aliases.src[t]||t,c.promise(r))return r.then(function(e){return C(n)({name:t,body:e,headers:o})}).catch(R);_("registering",t);var u=D(n)({name:t,body:r,headers:o});return u?(n.resources[t]=u,n.emit("change",[t,{type:"update",value:u.body,time:J(u)}]),n.resources[t].body):(R("failed to register",t),!1)}},D=function(n){return function(e){return m("content-type")(e)||b(n.types).sort(w("priority")).some(z(e)),m("content-type")(e)?I(n)(e):(R("could not understand resource",e),!1)}},I=function(n){return function(e){var t=m("content-type")(e);return n.types[t]?(n.types[t].parse||s)(e):(R("could not understand type",t),!1)}},z=function(n){return function(e){return e.check(n)&&(n.headers["content-type"]=e.header)}},L=function(){return[S].reduce(g.obj("header"),1)},U=function(n,e){for(var t in n.aliases={dst:{},src:{}},e)n.link(e[t],t);return n},q=function(n){return function(e,t){e in n.resources&&t==n.aliases.src[e]||(n.aliases.src[e]=t,n.aliases.dst[t]=e,Object.defineProperty(n.resources,e,{get:function(){return n.resources[t]},set:function(e){n.resources[t]=e},configurable:!0}))}},R=(E="[ri/core]",function(n){if(!k.console||!console.error.apply)return n;c.arr(arguments[2])&&(arguments[2]=arguments[2].length);var e=g.arr(arguments),t="[err]["+(new Date).toISOString()+"]"+E;return e.unshift(t.red?t.red:t),console.error.apply(console,e),n}),T=N("[ri/core]"),_=function(n){return"*"==$||A.some(function(n){return n=B(n).split("/"),function(e){return 1==e.length?e[0]==n[0]:2==e.length&&e[0]==n[0]&&e[1]==n[1]}}(n))?function(e){if(!k.console||!console.log.apply)return e;c.arr(arguments[2])&&(arguments[2]=arguments[2].length);var t=g.arr(arguments),r="[deb]["+(new Date).toISOString()+"]"+n;return t.unshift(r.grey?r.grey:r),console.log.apply(console,t),e}:s}("[ri/core]"),J=function(n,e){return e=p("body.log.length")(n),c.num(e)?e-1:e},M=function(n){return F("creating"),k.ripple||(k.ripple=n),n},F=N("[ri/singleton]"),G=function(n,e){return function(t){return e[t]=n[t],t}},W=function(n){return function(){return!n.apply(this,arguments)}},Y=function n(e){return function(t){for(x in t)c.obj(t[x])&&c.obj(e[x])?n(e[x])(t[x]):e[x]=t[x];return e}};var H=function n(e,t){var r=arguments.length;return c.str(e)||2!=r?c.str(e)||3!=r?function(n){var o=this||{};return n=(n=(n=o.nodeName||c.fn(o.node)?o:n).node?n.node():n).host||n,r>1&&!1===t?n.removeAttribute(e):r>1?(n.setAttribute(e,t),t):n.attributes.getNamedItem(e)&&n.attributes.getNamedItem(e).value}:n(arguments[1],arguments[2]).call(this,arguments[0]):n(arguments[1]).call(this,arguments[0])},K={add:function(n,e,t){c.arr(n)?n.splice(e,0,t):n[e]=t},update:function(n,e,t){if(c.num(e)||e)n[e]=t;else{if(!c.obj(t))return!0;for(var r in n)delete n[r];for(var r in t)n[r]=t[r]}},remove:function(n,e){c.arr(n)?n.splice(e,1):delete n[e]}},Q=JSON.stringify,V=JSON.parse,X=function(n,e){return function(t,r,u){if(!c.obj(t)&&!c.fn(t))return t;if(!c.obj(n)){var a=r||t.log||[],s=t;if(c.def(u)||(u=a.max||0),u||(a=[]),u<0&&(a=a.concat(null)),u>0){var f=Q(t);s=V(f),a=a.concat({type:"update",value:V(f),time:a.length})}return o(a,"max",u),s.log?s.log=a:o(i(s,null),"log",a,1),s}return!!c.def(n.key)&&(!!function n(e,t,r,o){var u=r.shift();if(!K[t])return!1;if(r.length){if(!(u in e)){if("remove"==t)return!0;e[u]={}}return n(e[u],t,r,o)}return!K[t](e,u,o)}(t,n.type,(n.key=""+n.key).split(".").filter(Boolean),n.value)&&(t.log&&t.log.max&&t.log.push((n.time=t.log.length,t.log.max>0?n:null)),!e&&t.emit&&t.emit("change",n),t))}};var Z,nn=function(n){return en("creating"),n.on("change.data").filter(function(e){var t=e[0];e[1];return m("content-type","application/data")(n.resources[t])}).filter(function(n){n[0];var e=n[1];return e&&e.key}).map(function(e){var t=e[0],r=e[1];return n.resources[t].body.emit("change",r||null,W(c.in(["bubble"])))}),n.types["application/data"]={header:"application/data",ext:"*.data.js",selector:function(n){return'[data~="'+n.name+'"]'},extract:function(n){return(H("data")(n)||"").split(" ")},check:function(n){return c.obj(n.body)},load:function(e){var t=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}(e.headers.path);return t=t.default||t,t=c.fn(t)?t(n):t,e.headers["content-type"]=this.header,n(Y(e)(t)),n.resources[e.name]},parse:function(e){var t,r=n.resources[e.name]||{};return(t=e.headers,function(n){return d(n).filter(W(c.in(t))).map(G(n,t)),t})(r.headers),e.body=X()(e.body||[],r.body&&r.body.log,c.num(e.headers.log)?e.headers.log:-1),function(n){return function(e){return d(e).map(G(e,n)),n}}(e.body.on)(tn(r)),e.body.on("change.bubble",function(t){n.emit("change",n.change=[e.name,t],W(c.in(["data"]))),delete n.change}),e.headers.loaded&&!e.headers.loading&&(e.headers.loading=Promise.resolve(e.headers.loaded(n,e)).then(function(){return delete e.headers.loading,e})),e}},n},en=N("[ri/types/data]"),tn=p("body.on"),rn=function(n){return on("creating"),n.types["text/css"]={header:"text/css",ext:"*.css",selector:function(n){return'[css~="'+n.name+'"]'},extract:function(n){return(H("css")(n)||"").split(" ")},check:function(n){return O(".css")(n.name)},shortname:function(n){return(void 0)(n)},load:!1,parse:function(n){return n.headers.hash=n.headers.hash||function(n){for(var e=5381,t=n.length;t;)e=33*e^n.charCodeAt(--t);return e>>>0}(n.body),n}},n},on=N("[ri/types/css]"),un=function(n,e){void 0===e&&(e={});var t=e.dir;return void 0===t&&(t="."),cn("creating"),n.require=function(e){return function(t){if(t in e.headers.dependencies&&n.resources[e.headers.dependencies[t]])return n(e.headers.dependencies[t]);throw new Error("Cannot find module: "+t+" for "+e.name)}},n.types["application/javascript"]={header:an,selector:function(n){return n.name+',[is~="'+n.name+'"]'},extract:function(n){return(H("is")(n)||"").split(" ").concat((n.nodeName||"").toLowerCase())},ext:"*.js",shortname:function(n){return(void 0)(n).split(".").slice(0,-1).join(".")},check:function(n){return c.fn(n.body)},load:!1,parse:function(e){if("cjs"==e.headers.format){var t={exports:{}};e.body(t,t.exports,n.require(e),{env:{}}),e.body=t.exports}return e}},n},cn=N("[ri/types/fn]"),an="application/javascript",sn=Math.min,fn=Math.pow,dn=function(n,e){return function(){var t=window.WebSocket,r=(window.location,window.setTimeout),o=new t(e);o.onopen=function(){return n.emit("connected",o)},o.onmessage=function(e){return n.emit("recv",e.data)},o.onclose=function(){n.ready=n.once("connected"),n.emit("disconnected"),r(n.connect,ln(++n.attempt))}}},ln=function(n,e,t){return void 0===e&&(e=100),void 0===t&&(t=1e4),sn(t,e*fn(2,n))},pn=function(n){void 0===n&&(n={});var e=n.socket;void 0===e&&(e=function(n){void 0===n&&(n=location.href.replace("http","ws"));var e=i({attempt:0});return e.ready=e.once("connected"),e.connect=dn(e,n),e.connect(),e.send=function(n){return e.ready.then(function(e){return e.send(n)})},e}()),e.id=0;var t=i({socket:e,send:vn(e),get subscriptions(){return b(e.on).map(function(n){return n&&n[0]}).filter(function(n){return n&&n.type&&"$"==n.type[0]})}});return e.once("disconnected").map(function(){return e.on("connected").map(hn(t))}),e.on("recv").map(mn).each(function(n){var r=n.id,o=n.data,u=e.on["$"+r]&&e.on["$"+r][0];o.exec?o.exec(u,o.value):r?e.emit("$"+r,o):t.emit("recv",o)}),t},mn=function(n){return new Function("return "+n)()},hn=function(n){return function(){return n.subscriptions.map(function(e){var t=e.subscription;return n.socket.send(t)})}},vn=function(n,e){return function(t,r){if(t instanceof window.Blob)return yn(n,t,r);var o=l(++n.id),u=n.on("$"+o),i=function(t,r){return void 0===r&&(r=0),n.send(u.source.subscription=l({id:o,data:t,type:e})).then(function(){return u.emit("sent",{id:o,count:r})})};return t.next?t.map(i).source.emit("start"):i(t),u.source.once("stop").filter(function(n){return"CLOSED"!=n}).map(function(){return vn(n,"UNSUBSCRIBE")(o).filter(function(n,e,t){return t.source.emit("stop","CLOSED")})}),u}},yn=function(n,e,t,r,o){void 0===r&&(r=0),void 0===o&&(o=1024);var u=i().on("recv"),c=function(t){return function(){return r>=e.size?u.emit("sent",{id:t}):(n.send(e.slice(r,r+=o)),window.setTimeout(c(t)))}};return vn(n,"BINARY")({size:e.size,meta:t}).on("sent",function(n){var e=n.id;return c(e)()}).on("progress",function(n){return u.emit("progress",{received:n,total:e.size})}).map(u.next).source.until(u.once("stop")),u},bn=function(n,e,t){void 0===e&&(e={}),void 0===t&&(t={});var r=t.xrs;return void 0===r&&(r=pn),n.server=r(),n.send=gn(n),n.subscribe=jn(n),n.subscriptions={},n.get=xn(n),n.upload=On(n),n.upload.id=0,n.server.on("recv").map(function(e,t,r){return wn(n)(e,t,r)}),n},gn=function(n){var e=n.server;return function(n,t,r){return n instanceof Blob?e.send(n,t):c.obj(n)?e.send(n):e.send({name:n,type:t,value:r})}},xn=function(n){return function(e,t){return n.subscribe(e,t).filter(function(n,e,t){return t.source.emit("stop")}).start()}},wn=function(n,e,t){return function(r){o&&r.name&&o!=r.name&&n.link(o,r.name);var o=r.name=r.name||e;return r.type||(r.type="update"),c.def(t)&&(r.key=t+"."+l(r.key)),r.key||"update"!=r.type?X(r)(n.resources[o]?n(o):n(o,{})):n(Sn(r)),n.change=r,p(t)(n(o))}},jn=function(n){return function(e,t){if(c.arr(e))return kn(e.map(function(e){return n.subscribe(e,t)})).map(function(n){return e.reduce(function(e,t,r){return e[t]=n[r],e},{})});if(n.subscriptions[e]=n.subscriptions[e]||{},c.arr(t))return kn(t.map(function(t){return n.subscribe(e,t)})).map(function(){return p(t)(n(e))});var r=i().on("subscription");r.on("stop").each(function(){o.subs.splice(o.subs.indexOf(r),1),function(n,e){1===arguments.length?setTimeout(n):setTimeout(e,n)}(1e3,function(){o.subs.length||(o.source.emit("stop"),n.subscriptions[e][t]=void 0,r.emit("end"))})}),n.subscriptions[e][t]&&r.on("start").map(function(){return p(t)(n(e))}).filter(c.def).map(function(n){return r.next(n)});var o=n.subscriptions[e][t]=n.subscriptions[e][t]||n.send(e,"SUBSCRIBE",t).map(wn(n,e,t)).each(function(e){[].concat(o.subs).map(function(n){return n.next(e)}),delete n.change});return o.subs=o.subs||[],o.subs.push(r),r}},On=function(n){return function(e,t){var o=++n.upload.id,u={},i=0,c=function(){if(!a.length)return!0;var e=a.shift(),t=e.field,r=e.filename,u=e.i,f=e.blob;return n.send(f,{filename:r,field:t,i:u,index:o}).on("progress",function(n){var e=n.received;n.total;return s.emit("progress",{total:i,received:i-(f.size-e)-a.reduce(function(n,e){return n+e.blob.size},0)})}).then(c)},a=d(t).map(function(n){return u[n]=t[n],n}).filter(function(n){return t[n]instanceof FileList}).map(function(n){return u[n]=[],g.arr(t[n]).map(function(n){return i+=n.size,n}).map(function(e,t){return{field:n,filename:e.name,i:t,blob:e,sent:0}})}).reduce(r,[]),s=n.send({files:a.length,type:"PREUPLOAD",fields:u,index:o,size:i,name:e}).once("sent",c);return s}},Sn=function(n){var e=n.name,t=n.value;return{name:e,headers:n.headers,body:t}},kn=function(n){var e=i().on("merged");return e.streams=n,n.map(function(t){return t.each(function(r){t.latest=r;var o=n.map(function(n){return n.latest});o.every(c.def)&&e.next(o)})}),e.once("start").map(function(){return n.map(function(n){return n.source.emit("start")})}),e.once("stop").map(function(){return n.map(function(n){return n.source.emit("stop")})}),e},Nn=function(t){return e?($n("creating"),Node.prototype.render=function(){var e=this.nodeName.toLowerCase();if(e.includes("-"))return this.state=this.state||{},this.fn$=this.fn$||t.subscribe(e).map(function(t){return n(e,t)})},Node.prototype.draw=function(){this.render()},function(n){document.body?n():document.addEventListener("DOMContentLoaded",n.bind(this))}(function(){return Array.from(document.querySelectorAll("*")).filter(function(n){return n.nodeName.includes("-")}).map(function(n){return n.render()})}),t):t},$n=N("[ri/components]");return function(n){function e(n){var e=P(n);return M(e,n),nn(e,n),rn(e,n),un(e,n),bn(e,n),Nn(e,n),e}!window.ripple&&e(),n.exports=e}(Z={exports:{}},Z.exports),Z.exports}(define);
