!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ripple=e()}}(function(){return function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){},{}],2:[function(e,t,n){"use strict";function i(e){return g?(N("creating"),q||(document.body?d(e)():document.addEventListener("DOMContentLoaded",d(e))),E("types.application/javascript.render",k(T(e)))(e),E("types.application/data.render",k(_(e)))(e),e.draw=r(e),e.render=c(e),e.on("change",u(e)),e):e}function r(e){return function(t){return this&&this.nodeName?a(e)(this):this&&this.node?a(e)(this.node()):t?t instanceof S?a(e)(t.target):t[0]instanceof S?a(e)(t[0].target):t.nodeName?a(e)(t):t.node?a(e)(t.node()):t.name?s(e)(t.name):R.str(t)?s(e)(t):M("could not update",t):o(e)}}function o(e){var t=v(e.resources).filter(h("content-type","application/javascript")).map(E("name")).join(",");return L(t).map(a(e))}function s(e){return function(t){var n=e.resources[t],i=h("content-type")(n);return(e.types[i].render||x)(n)}}function u(e){return function(t){return!h("pending")(t)&&(t.headers.pending=requestAnimationFrame(function(){return delete e.resources[t.name].headers.pending,e.draw(t)}))}}function a(e){return function(t){if("#document-fragment"==t.nodeName)return a(e)(t.host);if("#text"==t.nodeName)return a(e)(t.parentNode);if(t.matches(H)&&null==b(t,"inert"))return e.render.apply(this,arguments)}}function c(e){return function(t){var n=b(t,"is")||t.tagName.toLowerCase(),i=b(t,"data"),r=j(e)(n),o=m(e)(i);try{r&&(!i||o)&&r.call(t.shadowRoot||t,o)}catch(s){M(s,s.stack)}return t}}function d(e){return function(){if("undefined"!=typeof MutationObserver){document.body.muto&&document.body.muto.disconnect();var t=document.body.muto=new MutationObserver(l(e)),n={childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0};t.observe(document.body,n)}}}function l(e){return function(t){t.filter(E("attributeName")).filter(O("target",f)).filter(w).map(e.draw),t.map(E("addedNodes")).map(C.arr).reduce(y).filter(f).map(e.draw)}}function w(e){return b(e.target,e.attributeName)!=e.oldValue}function f(e){return~e.nodeName.indexOf("-")}var p=function(e){return e&&e.__esModule?e["default"]:e};t.exports=i;var m=window.resourcify,y=(window.includes,window.flatten),h=(window.prepend,window.header),g=window.client,v=window.values,b=window.attr,j=window.body,x=window.noop,k=window.wrap,E=window.key,M=window.err,L=window.all,N=window.log,R=window.is,O=window.by,C=(window.lo,window.to),_=p(e("./types/data")),T=p(e("./types/fn"));N=N("[ri/components]"),M=M("[ri/components]");var S=g&&window.MutationRecord||x,q=g&&!!document.registerElement,H=q?"html *, :host-context(html) *":"html *";g&&(Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector)},{"./types/data":3,"./types/fn":4,"utilise/all":1,"utilise/attr":1,"utilise/body":1,"utilise/by":1,"utilise/client":1,"utilise/err":1,"utilise/flatten":1,"utilise/header":1,"utilise/includes":1,"utilise/is":1,"utilise/key":1,"utilise/lo":1,"utilise/log":1,"utilise/noop":1,"utilise/prepend":1,"utilise/resourcify":1,"utilise/to":1,"utilise/values":1,"utilise/wrap":1}],3:[function(e,t,n){"use strict";function i(e){return function(t){return r('[data~="'+t.name+'"]:not([inert])').map(e.draw)}}t.exports=i;var r=window.all},{"utilise/all":1}],4:[function(e,t,n){"use strict";function i(e){return function(t){if(!a||r(t))return u(""+t.name+':not([inert])\n                 ,[is="'+t.name+'"]:not([inert])').map(e.draw);var n=Object.create(HTMLElement.prototype),i={prototype:n},o=t.headers["extends"];o&&(i["extends"]=o),n.attachedCallback=n.attributeChangedCallback=e.draw,document.registerElement(t.name,i)}}function r(e){var t=o("extends")(e);return t?document.createElement(t,e.name).attachedCallback:document.createElement(e.name).attachedCallback}t.exports=i;var o=window.header,s=window.client,u=window.all,a=s&&!!document.registerElement},{"utilise/all":1,"utilise/client":1,"utilise/header":1}],5:[function(e,t,n){"use strict";function i(){function e(n,i,o){return g.arr(n)?n.map(e):g.str(n)&&!i&&t[n]?t[n].body:!g.str(n)||i||t[n]?g.str(n)&&i?r(e)({name:n,body:i,headers:o}):g.obj(n)&&!g.arr(n)?r(e)(n):(y("could not find or create resource",n),!1):r(e)({name:n})}h("creating");var t={};return e.resources=t,e.resource=l(e),e.register=e,e.types=a(),d(e)}function r(e){return function(t){var n=t.name,i=t.body,r=t.headers,s=void 0===r?{}:r;if(!n)return y("cannot register nameless resource");h("registering",n);var u=o(e)({name:n,body:i,headers:s});return u?(e.resources[n]=u,e.emit("change",[e.resources[n]]),e.resources[n].body):(y("failed to register",n),!1)}}function o(e){return function(t){return p("content-type")(t)||m(e.types).some(u(t)),p("content-type")(t)?s(e)(t):(y("could not understand",t),!1)}}function s(e){return function(t){return((e.types[p("content-type")(t)]||{}).parse||f)(t)}}function u(e){return function(t){return t.check(e)&&(e.headers["content-type"]=t.header)}}function a(){return w([v],"header")}var c=function(e){return e&&e.__esModule?e["default"]:e};t.exports=i;var d=window.emitterify,l=(window.colorfill,window.chainable),w=window.objectify,f=window.identity,p=(window.rebind,window.header),m=window.values,y=window.err,h=window.log,g=window.is,v=c(e("./types/text"));y=y("[ri/core]"),h=h("[ri/core]")},{"./types/text":6,"utilise/chainable":1,"utilise/colorfill":1,"utilise/emitterify":1,"utilise/err":1,"utilise/header":1,"utilise/identity":1,"utilise/is":1,"utilise/log":1,"utilise/objectify":1,"utilise/rebind":1,"utilise/values":1}],6:[function(e,t,n){"use strict";t.exports={header:"text/plain",check:function(e){return!i(".html")(e.name)&&!i(".css")(e.name)&&r.str(e.body)}};var i=window.includes,r=window.is},{"utilise/includes":1,"utilise/is":1}],7:[function(e,t,n){"use strict";function i(e){return o("creating"),e.types["text/css"]={header:"text/css",check:function(e){return r(".css")(e.name)}},e}t.exports=i;var r=window.includes,o=window.log;o=o("[ri/types/css]")},{"utilise/includes":1,"utilise/log":1}],8:[function(e,t,n){"use strict";function i(e){return c("creating"),e.on("change.data",r(e)),e.types["application/data"]={header:"application/data",check:function(e){return d.obj(e.body)||!e.body?!0:!1},parse:function(t){var n=e.resources[t.name]||{};return delete t.headers.listeners,u(t.headers)(n.headers),!t.body&&(t.body=[]),!t.body.on&&(t.body=o(t.body)),t.body.on.change=t.headers.listeners=t.headers.listeners||[],t.body.on("change.bubble",function(){return e.emit("change",[t],a(d["in"](["data"])))}),t}},e}function r(e){return function(t){return arguments[0]=arguments[0].body,s("content-type","application/data")(t)&&e.resources[t.name].body.emit("change",l.arr(arguments),a(d["in"](["bubble"])))}}t.exports=i;var o=window.emitterify,s=window.header,u=window.extend,a=window.not,c=window.log,d=window.is,l=window.to;c=c("[ri/types/data]")},{"utilise/emitterify":1,"utilise/extend":1,"utilise/header":1,"utilise/is":1,"utilise/log":1,"utilise/not":1,"utilise/to":1}],9:[function(e,t,n){"use strict";function i(e){if(!r)return e;s("creating");var t=e.render;return e.render=function(e){var n=o(e,"delay");return null!=n?(e.setAttribute("inert",""),e.removeAttribute("delay"),setTimeout(e.removeAttribute.bind(e,"inert"),+n)):t.apply(this,arguments)},e}t.exports=i;var r=window.client,o=window.attr,s=window.log,u=window.err;s=s("[ri/delay]"),u=u("[ri/delay]")},{"utilise/attr":1,"utilise/client":1,"utilise/err":1,"utilise/log":1}],10:[function(e,t,n){"use strict";function i(e){return r("creating"),e.types["application/javascript"]={header:"application/javascript",check:function(e){return o.fn(e.body)},parse:function(e){return e.body=i(e.body),e}},e}t.exports=i;var r=(window.includes,window.log),o=window.is,i=window.fn;r=r("[ri/types/fn]")},{"utilise/fn":1,"utilise/includes":1,"utilise/is":1,"utilise/log":1}],11:[function(e,t,n){"use strict";function i(e){return o("creating"),e.types["text/html"]={header:"text/html",check:function(e){return r(".html")(e.name)}},e}t.exports=i;var r=window.includes,o=window.log;o=o("[ri/types/html]")},{"utilise/includes":1,"utilise/log":1}],12:[function(e,t,n){"use strict";function i(e){return c&&window.localStorage?(y("creating"),r(e),e.on("change.cache",u(1e3)(o(e))),e):void 0}function r(e){f("loading cache",function(){(w(localStorage.ripple)||[]).forEach(s(e))})}function o(e){return function(t){y("cached");var n=d(l(e.resources)).filter(p(a("cache-control","no-store")));n.filter(a("content-type","application/javascript")).map(function(t){return t.body=m(e.resources[t.name].body)}),localStorage.ripple=m(n)}}function s(e){return function(t){return t.headers.silent=!0,e(t)}}t.exports=i;var u=window.debounce,a=window.header,c=window.client,d=window.values,l=window.clone,w=window.parse,f=window.group,p=(window.proxy,window.not),m=window.str,y=(window.key,window.log),h=window.err;window.is;y=y("[ri/offline]"),h=h("[ri/offline]")},{"utilise/client":1,"utilise/clone":1,"utilise/debounce":1,"utilise/err":1,"utilise/group":1,"utilise/header":1,"utilise/is":1,"utilise/key":1,"utilise/log":1,"utilise/not":1,"utilise/parse":1,"utilise/proxy":1,"utilise/str":1,"utilise/values":1}],13:[function(e,t,n){"use strict";function i(e){if(s){w("creating");var t=e.render;return l("types.text/css.render",a(o(e)))(e),e.render=function(n){var i,o,s=u(n,"css"),a=n.shadowRoot||n,l="",w=!n.shadowRoot||!document.head.createShadowRoot;if(!s)return t.apply(this,arguments);if(!s||e.resources[s]){if(w&&c('style[resource="'+s+'"]').length)return t.apply(this,arguments);i=d("style",a)||document.createElement("style"),o=e(s),w&&(l=u(n,"is")?'[is="'+u(n,"is")+'"]':n.tagName.toLowerCase(),o=r(o,l)),i.innerHTML=o,u(i,"resource",w?s:!1),a.insertBefore(i,a.firstChild),t.apply(this,arguments)}},e}}function r(e,t){return t?e.replace(/:host\((.+)\)/gi,function(e,n){return t+n}).replace(/:host/gi,t).replace(/^(.+)[{]/gim,function(e){return t+" "+e}).replace(/^(.+)(^[:])[,]/gim,function(e){return t+" "+e}).replace(new RegExp(t+" "+t,"g"),t):e}function o(e){return function(t){return c('[css="'+t.name+'"]:not([inert])').map(e.draw)}}t.exports=i;var s=window.client,u=window.attr,a=window.wrap,c=window.all,d=window.raw,l=window.key,w=window.log,f=window.err;w=w("[ri/precss]"),f=f("[ri/precss]")},{"utilise/all":1,"utilise/attr":1,"utilise/client":1,"utilise/err":1,"utilise/key":1,"utilise/log":1,"utilise/raw":1,"utilise/wrap":1}],14:[function(e,t,n){"use strict";function i(e){if(o){d("creating");var t=e.render;return c("types.text/html.render",u(r(e)))(e),e.render=function(n){var i,r=s(n,"template");return r?void((!r||e(r))&&(i=document.createElement("div"),i.innerHTML=e(r),n.innerHTML=i.innerHTML,t.apply(this,arguments))):t.apply(this,arguments)},e}}function r(e){return function(t){return a('[template="'+t.name+'"]:not([inert])').map(e.draw)}}t.exports=i;var o=window.client,s=window.attr,u=window.wrap,a=window.all,c=window.key,d=window.log,l=window.err;d=d("[ri/prehtml]"),l=l("[ri/prehtml]")},{"utilise/all":1,"utilise/attr":1,"utilise/client":1,"utilise/err":1,"utilise/key":1,"utilise/log":1,"utilise/wrap":1}],15:[function(e,t,n){"use strict";function i(e){return y("creating"),e.on("change.reactive",r(e)),e}function r(e){return function(t){function n(n){if(g.obj(n)&&!n.observer){var i=o(e)(t);p(n,"observer",i),Object.observe(n,i)}}if(g.obj(t.body)&&!d("reactive",!1)(t)&&!t.body.observer){if(!Object.observe)return u(e)(t);Array.observe(t.body,p(t.body,"observer",s(e)(t))),g.arr(t.body)&&t.body.forEach(n)}}}function o(e){return function(t){return function(n){var i=t.body.indexOf(n[0].object),r=t.body,o="update",s={key:i,value:r,type:o};e.emit("change",[t,s],f(g["in"](["reactive"])))}}}function s(e){return function(t){return function(n){n.map(c).filter(Boolean).map(function(n){return e.emit("change",[t,n],f(g["in"](["reactive"])))})}}}function u(e){return function(t){e.observer||(e.observer=setInterval(a(e),100)),e.cache||(e.cache={}),h(e.cache,t.name)||(e.cache[t.name]=w(t.body))}}function a(e){return function(){return e&&e.resources?void l(e.cache).forEach(function(t){var n=e.resources[t];e.cache[t]!=w(n.body)&&(e.cache[t]=w(n.body),e.emit("change",[n],f(g["in"](["reactive"]))))}):clearInterval(e.observer)}}function c(e){var t=e.type,n="delete"==t?e.oldValue:e.removed&&e.removed[0],i=e.object,r=e.name||w(e.index),o=i[r],s="update"==t&&w(o)==w(e.oldValue),u={key:r,value:n||o,type:"update"==t?"update":"delete"==t?"remove":"splice"==t&&n?"remove":"splice"!=t||n?"add"==t?"push":!1:"push"};return s?(y("skipping update"),!1):u}t.exports=i;var d=window.header,l=window.keys,w=window.str,f=window.not,p=window.def,m=window.err,y=window.log,h=window.has,g=window.is;y=y("[ri/reactive]"),m=m("[ri/reactive]")},{"utilise/def":1,"utilise/err":1,"utilise/has":1,"utilise/header":1,"utilise/is":1,"utilise/keys":1,"utilise/log":1,"utilise/not":1,"utilise/str":1}],16:[function(e,t,n){"use strict";function i(e){if(o){s("creating",document.head.createShadowRoot?"encapsulation":"closing gap");var t=e.render;return e.render=function(e){e.createShadowRoot?!e.shadowRoot&&e.createShadowRoot()&&r(e):(e.shadowRoot=e,e.shadowRoot.host=e),t(e)},e}}function r(e){e.shadowRoot.innerHTML=e.innerHTML}t.exports=i;var o=window.client,s=window.log,u=window.err;s=s("[ri/shadow]"),u=u("[ri/shadow]")},{"utilise/client":1,"utilise/err":1,"utilise/log":1}],17:[function(e,t,n){"use strict";function i(e){return o("creating"),r.ripple=e,e}t.exports=i;var r=window.owner,o=window.log;o=o("[ri/singleton]")},{"utilise/log":1,"utilise/owner":1}],18:[function(e,t,n){"use strict";function i(e,t){return E("creating"),y(e.types).map(c(e)),e.sync=w(e),e.io=l(t),e.on("change",function(t){return w(e)()(t.name)}),e.io.on("change",d(e)),e.io.on("connection",function(t){return t.on("change",r(e))}),e.io.on("connection",function(t){return w(e)(t)()}),e}function r(e){return function(t){function n(n){var o=j(n)(c),s=t.name,a=r.body,l=n.replace(/_/g,""),w=1==o.length?"push":2==o.length?"update":0===o[2]?"remove":"",f="update"==w?o[1]:o[0],p=O[w];if(w&&(!u||u.call(i,f,a,l,w,s,p))){if(!l)return d(e)(t);p(l,f,a,s,r),e(s).emit("change")}}E("receiving",t.name);var i=this,r=e.resources[t.name];if(!r)return E("no resource",t.name);if(!N.obj(r.body))return d(e)(t);var s=h("proxy-to")(r)||m,u=h("proxy-from")(r),a=s.call(i,j("body")(r)),c=R(a,t.body);return N.arr(c)?n(""):void b(c).reverse().filter(k(N("_t"))).map(o(c)).map(n)}}function o(e){return function(t){var n=j(t)(e);return t=N.arr(t)?t:[t],N.arr(n)?t.join("."):o(e)(t.concat(b(n)).join("."))}}function s(e,t,n,i){var r=e.split("."),o=r.pop(),s=j(r.join("."))(n)||n;N.arr(s)?s.splice(o,0,t):s[e]=t}function u(e,t,n,i){var r=e.split("."),o=r.pop(),s=j(r.join("."))(n)||n;N.arr(s)?s.splice(o,1):delete s[o]}function a(e,t,n,i){j(e,t)(n)}function c(e){return function(t){var n=t.parse||v;t.parse=function(t){if(g)return n.apply(this,arguments),t;var i=e.resources[t.name],r=h("proxy-from")(i),o=h("proxy-to")(i);return t.headers["proxy-from"]=h("proxy-from")(t)||h("from")(t)||r,t.headers["proxy-to"]=h("proxy-to")(t)||h("to")(t)||o,n.apply(this,arguments),t}}}function d(e){return function(t){return t.headers.silent=!0,e(t)}}function l(t){return g?window.io?window.io():N.fn(e("socket.io-client"))?e("socket.io-client")():{on:v,emit:v}:e("socket.io")(t.server||t)}function w(e){return function(t){return function(n){if(!arguments.length||n){if(!n)return y(e.resources).map(j("name")).map(w(e)(t)),e;var i=e.resources[n],r=g?[e.io]:e.io.of("/").sockets,o=p(r.length,n),s=h("silent",!0)(i);return s?delete i.headers.silent:i?o(N.str(t)?r.filter(L("sessionID",t)).map(f(i)):t?[f(i)(t)]:r.map(f(i))):E("no resource to emit: ",n)}}}}function f(e){return function(t){var n=e.headers["proxy-to"]||m,i=N.fn(e.body)?""+e.body:e.body,i=n.call(t,i);return i&&t.emit("change",{name:e.name,body:i,headers:e.headers}),!!i}}function p(e,t){return function(n){E(x(n.filter(Boolean).length).green.bold+"/"+x(e).green,"sending",t)}}t.exports=i;var m=window.identity,y=(window.replace,window.matches,window.values),h=window.header,g=window.client,v=window.noop,b=window.keys,j=window.key,x=window.str,k=window.not,E=window.log,M=window.err,L=window.by,N=window.is,R=e("jsondiffpatch").diff;E=E("[ri/sync]"),M=M("[ri/sync]");var O={push:s,remove:u,update:a}},{jsondiffpatch:1,"socket.io":1,"socket.io-client":1,"utilise/by":1,"utilise/client":1,"utilise/err":1,"utilise/header":1,"utilise/identity":1,"utilise/is":1,"utilise/key":1,"utilise/keys":1,"utilise/log":1,"utilise/matches":1,"utilise/noop":1,"utilise/not":1,"utilise/replace":1,"utilise/str":1,"utilise/values":1}],19:[function(e,t,n){"use strict";function i(e){var t=g();return v(t),b(t),j(t),x(t),k(t),o(t),s(t),a(t),c(t),l(t),w(t),y(t),p(t),m(e),h(t,e),u(t,e),f(t),d(t),t}var r=function(e){return e&&e.__esModule?e["default"]:e},o=r(e("rijs.components")),s=r(e("rijs.singleton")),u=r(e("rijs.sessions")),a=r(e("rijs.reactive")),c=r(e("rijs.prehtml")),d=r(e("rijs.offline")),l=r(e("rijs.precss")),w=r(e("rijs.shadow")),f=r(e("rijs.resdir")),p=r(e("rijs.mysql")),m=r(e("rijs.serve")),y=r(e("rijs.delay")),h=r(e("rijs.sync")),g=r(e("rijs.core")),v=r(e("rijs.data")),b=r(e("rijs.html")),j=r(e("rijs.css")),x=r(e("rijs.fn")),k=r(e("rijs.db")),E=window.client;t.exports=E?i():i},{"rijs.components":2,"rijs.core":5,"rijs.css":7,"rijs.data":8,"rijs.db":1,"rijs.delay":9,"rijs.fn":10,"rijs.html":11,"rijs.mysql":1,"rijs.offline":12,"rijs.precss":13,"rijs.prehtml":14,"rijs.reactive":15,"rijs.resdir":1,"rijs.serve":1,"rijs.sessions":1,"rijs.shadow":16,"rijs.singleton":17,"rijs.sync":18,"utilise/client":1}]},{},[19])(19)});